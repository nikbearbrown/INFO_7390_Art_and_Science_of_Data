import{n as U,r as s,bh as k,z as H,cr as S,C as L,j as u,br as B,bF as D,bs as j,ba as O,bt as _,cs as w}from"./index.B-cSXLfy.js";import{u as K}from"./uniqueId.Dd1Zs3iN.js";import{u as $,a as q,b as A}from"./useOnInputChange.CNxfGIgD.js";import{a as G}from"./useBasicWidgetState.fZnKVVgz.js";import{I as N}from"./InputInstructions.55wIEZQg.js";import{I as J}from"./input.DG8cw326.js";import"./inputUtils.CQWz5UKz.js";import"./FormClearHelper.B56TOIUD.js";import"./base-input.CPpHElOA.js";const Q=U("div",{target:"e1o1zy6o0"})("position:relative;");function X({disabled:e,element:t,widgetMgr:a,fragmentId:l}){var g;const[r,d]=s.useState(()=>W(a,t)??null),[I,y]=k(),[i,c]=s.useState(!1),T=s.useCallback(()=>{d(t.default??null),c(!0)},[t.default]),[x,p]=G({getStateFromWidgetMgr:W,getDefaultStateFromProto:Y,getCurrStateFromProto:Z,updateWidgetMgrState:M,element:t,widgetMgr:a,fragmentId:l,onFormCleared:T});$(x,r,d,i);const[C,h]=s.useState(!1),o=H(),[b]=s.useState(()=>K("text_input_")),{placeholder:F,formId:n,maxChars:f}=t,m=s.useCallback(()=>{c(!1),p({value:r,fromUi:!0})},[r,p]),V=S({formId:n})?a.allowFormEnterToSubmit(n):i,v=C&&I>o.breakpoints.hideWidgetDetails,z=s.useCallback(()=>{i&&m(),h(!1)},[i,m]),E=s.useCallback(()=>{h(!0)},[]),P=q({formId:n,maxChars:f,setDirty:c,setUiValue:d,setValueWithSource:p}),R=A(n,m,i,a,l);return L(Q,{className:"stTextInput","data-testid":"stTextInput",ref:y,children:[u(_,{label:t.label,disabled:e,labelVisibility:B((g=t.labelVisibility)==null?void 0:g.value),htmlFor:b,children:t.help&&u(D,{children:u(j,{content:t.help,placement:O.TOP_RIGHT})})}),u(J,{value:r??"",placeholder:F,onBlur:z,onFocus:E,onChange:P,onKeyPress:R,"aria-label":t.label,disabled:e,id:b,type:tt(t),autoComplete:t.autocomplete,overrides:{Input:{style:{minWidth:0,"::placeholder":{opacity:"0.7"},lineHeight:o.lineHeights.inputWidget,paddingRight:o.spacing.sm,paddingLeft:o.spacing.md,paddingBottom:o.spacing.sm,paddingTop:o.spacing.sm}},Root:{props:{"data-testid":"stTextInputRootElement"},style:{height:o.sizes.minElementHeight,borderLeftWidth:o.sizes.borderWidth,borderRightWidth:o.sizes.borderWidth,borderTopWidth:o.sizes.borderWidth,borderBottomWidth:o.sizes.borderWidth}}}}),v&&u(N,{dirty:i,value:r??"",maxLength:f,inForm:S({formId:n}),allowEnterToSubmit:V})]})}function W(e,t){return e.getStringValue(t)??null}function Y(e){return e.default??null}function Z(e){return e.value??null}function M(e,t,a,l){t.setStringValue(e,a.value,{fromUi:a.fromUi},l)}function tt(e){return e.type===w.Type.PASSWORD?"password":"text"}const dt=s.memo(X);export{dt as default};
